# PredictionBot ‚Äî –ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ö–æ–º–∏—Å—Å–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å](#–∫–æ–º–∏—Å—Å–∏–æ–Ω–Ω–∞—è-–º–æ–¥–µ–ª—å)
4. [–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ö–µ–º–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
5. [Smart Contract](#smart-contract)
6. [API Endpoints](#api-endpoints)
7. [–ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è](#–ø—Ä–æ–±–ª–µ–º—ã-–∏-—Ä–µ—à–µ–Ω–∏—è)
8. [–§–æ—Ä–º—É–ª—ã –∏ —Ä–∞—Å—á–µ—Ç—ã](#—Ñ–æ—Ä–º—É–ª—ã-–∏-—Ä–∞—Å—á–µ—Ç—ã)
9. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
10. [–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

---

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**PredictionBot** ‚Äî –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏ (YES/NO —Ä—ã–Ω–∫–∏) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TON –±–ª–æ–∫—á–µ–π–Ω–∞.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Frontend**: React 18 + TypeScript + TonConnect UI + Zustand
- **Backend**: Node.js + Express + PostgreSQL + Redis
- **Smart Contract**: TON escrow –∫–æ–Ω—Ç—Ä–∞–∫—Ç (—Ö—Ä–∞–Ω–∏—Ç –±–∞–ª–∞–Ω—Å—ã events –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—ã–ø–ª–∞—Ç—ã)
- **Telegram**: Bot –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫ (YES/NO) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TON
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã–ø–ª–∞—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è–º
- –õ–∏–¥–µ—Ä–±–æ—Ä–¥ –ø–æ –ø—Ä–∏–±—ã–ª–∏
- –û—Ç–º–µ–Ω–∞ —Å–æ–±—ã—Ç–∏–π —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º —Å—Ä–µ–¥—Å—Ç–≤

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—É–ª–æ–≤

#### –ü—Ä–æ–±–ª–µ–º–∞ –∏—Å—Ö–æ–¥–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–ò—Å—Ö–æ–¥–Ω—ã–π –ø—Ä–æ–º–ø—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–ª –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –≤—Å–µ—Ö —Ä—ã–Ω–∫–æ–≤ —á–µ—Ä–µ–∑ `market_id ‚Üí (total_yes, total_no, ...)`. –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç —Ä–∏—Å–∫–∏:
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–∞–∫–∏–µ TON –∫ –∫–∞–∫–æ–º—É —Ä—ã–Ω–∫—É –æ—Ç–Ω–æ—Å—è—Ç—Å—è
- –ë–∞–ª–∞–Ω—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ = —Å—É–º–º–∞ –≤—Å–µ—Ö –ø—É–ª–æ–≤ –≤—Å–µ—Ö —Ä—ã–Ω–∫–æ–≤
- –†–∏—Å–∫ –ø—É—Ç–∞–Ω–∏—Ü—ã –ø—Ä–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –≤—ã–ø–ª–∞—Ç
- –ï—Å–ª–∏ –æ–¥–∏–Ω —Ä—ã–Ω–æ–∫ "—Å–ª–æ–º–∞–µ—Ç—Å—è", —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –¥—Ä—É–≥–∏–µ
- –°–ª–æ–∂–Ω–µ–µ –∞—É–¥–∏—Ç –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤

#### –†–µ—à–µ–Ω–∏–µ: –û–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–∞ –æ–¥–∏–Ω —Ä—ã–Ω–æ–∫ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**:
- –ö–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π –æ—Ç–¥–µ–ª—å–Ω—ã–π escrow-–∫–æ–Ω—Ç—Ä–∞–∫—Ç
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç –¥–µ–ø–ª–æ–∏—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è
- –í—Å–µ TON —ç—Ç–æ–≥–æ —Ä—ã–Ω–∫–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –≤ —Å–≤–æ–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Ä–∏—Å–∫–æ–≤ –º–µ–∂–¥—É —Ä—ã–Ω–∫–∞–º–∏
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (–Ω–µ –Ω—É–∂–µ–Ω `market_id`)
- ‚úÖ –õ–µ–≥–∫–æ –∞—É–¥–∏—Ä–æ–≤–∞—Ç—å –±–∞–ª–∞–Ω—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä—ã–Ω–∫–∞
- ‚úÖ –ï—Å–ª–∏ –æ–¥–∏–Ω —Ä—ã–Ω–æ–∫ —Å–ª–æ–º–∞–µ—Ç—Å—è, –¥—Ä—É–≥–∏–µ –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞—é—Ç
- ‚úÖ –ü—Ä–æ—â–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã–ø–ª–∞—Ç (–≤–µ—Å—å –±–∞–ª–∞–Ω—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ = –ø—É–ª —Ä—ã–Ω–∫–∞)
- ‚úÖ –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–æ—Å–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- ‚ùå –î–æ—Ä–æ–∂–µ –≤ –¥–µ–ø–ª–æ–µ (–∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç = ~0.1-0.2 TON)
- ‚ùå –ù—É–∂–Ω–∞ —Ñ–∞–±—Ä–∏–∫–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏–ª–∏ –¥–µ–ø–ª–æ–π –∏–∑ backend

**–°—Ç–æ–∏–º–æ—Å—Ç—å**: –ü—Ä–∏ 1000 DAU –∏ 10 —Å–æ–±—ã—Ç–∏—è—Ö –≤ –¥–µ–Ω—å = ~300 —Å–æ–±—ã—Ç–∏–π/–º–µ—Å—è—Ü = ~30-60 TON –Ω–∞ –¥–µ–ø–ª–æ–π (–ø—Ä–∏–µ–º–ª–µ–º–æ –ø—Ä–∏ –æ–±–æ—Ä–æ—Ç–∞—Ö 50k TON/–¥–µ–Ω—å)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```typescript
// Backend –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è
async function createEvent(eventData) {
  // 1. –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ –ë–î
  const event = await db.events.create(eventData);
  
  // 2. –î–µ–ø–ª–æ–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
  const contractAddress = await deployMarketEscrowContract({
    eventId: event.id,
    adminAddress: ADMIN_ADDRESS,
    feeInBps: 50, // 0.5%
    feeOutBps: 150 // 1.5%
  });
  
  // 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
  await db.events.update(event.id, { 
    contract_address: contractAddress,
    contract_deployed_at: new Date()
  });
  
  return event;
}
```

---

## –ö–æ–º–∏—Å—Å–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å

### –ö–æ–º–∏—Å—Å–∏–∏ (–ö–†–ò–¢–ò–ß–ù–û –ó–ê–ü–û–ú–ù–ò–¢–¨)

1. **fee_in**: 0.3‚Äì0.5% —Å–æ –í–°–ï–• —Å—Ç–∞–≤–æ–∫ –Ω–∞ –≤—Ö–æ–¥–µ (–∑–∞ —É—á–∞—Å—Ç–∏–µ)
   - –í—ã—á–∏—Ç–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ —Å—Ç–∞–≤–∫–∏
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –∞–¥–º–∏–Ω-–∫–æ—à–µ–ª–µ–∫
   - –ù–µ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ

2. **fee_out**: 1‚Äì2% —Å –ø—É–ª–∞ –ø—Ä–æ–∏–≥—Ä–∞–≤—à–µ–π —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è
   - –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ —Ä—ã–Ω–∫–∞
   - –ë–µ—Ä–µ—Ç—Å—è —Å –ø—É–ª–∞ –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏—Ö
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –∞–¥–º–∏–Ω-–∫–æ—à–µ–ª–µ–∫

### –§–æ—Ä–º—É–ª–∞ –≤—ã–ø–ª–∞—Ç—ã –ø–æ–±–µ–¥–∏—Ç–µ–ª—è–º

**–ï—Å–ª–∏ YES –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç**:
```
fee_out = total_no √ó fee_out_bps / 10000
total_pool_after_fee = total_yes + total_no - fee_out
payout_per_ton_yes = total_pool_after_fee / total_yes
user_payout = user_stake_yes √ó payout_per_ton_yes
```

**–ï—Å–ª–∏ NO –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç**:
```
fee_out = total_yes √ó fee_out_bps / 10000
total_pool_after_fee = total_yes + total_no - fee_out
payout_per_ton_no = total_pool_after_fee / total_no
user_payout = user_stake_no √ó payout_per_ton_no
```

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞

- YES –ø—É–ª: 1000 TON
- NO –ø—É–ª: 500 TON
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å—Ç–∞–≤–∏–ª 100 TON –Ω–∞ YES
- fee_out_bps = 150 (1.5%)
- –ò—Å—Ö–æ–¥: YES –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç

```
fee_out = 500 √ó 150 / 10000 = 7.5 TON
total_pool_after_fee = 1000 + 500 - 7.5 = 1492.5 TON
payout_per_ton_yes = 1492.5 / 1000 = 1.4925 TON –∑–∞ –∫–∞–∂–¥—ã–π TON —Å—Ç–∞–≤–∫–∏
user_payout = 100 √ó 1.4925 = 149.25 TON
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç 149.25 TON (–ø—Ä–∏–±—ã–ª—å 49.25 TON, ROI = 49.25%)

### –î–æ—Ö–æ–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

```
–î–æ—Ö–æ–¥ = (fee_in √ó –æ–±–æ—Ä–æ—Ç_—Å—Ç–∞–≤–æ–∫) + (fee_out √ó min(V_Y, V_N))
```

**–ü—Ä–∏–º–µ—Ä** (–ø—Ä–∏ 1000 DAU, —Å—Ä–µ–¥–Ω—è—è —Å—Ç–∞–≤–∫–∞ 10 TON):
- –î–Ω–µ–≤–Ω–æ–π –æ–±–æ—Ä–æ—Ç: ~5000 —Å—Ç–∞–≤–æ–∫ √ó 10 TON = 50 000 TON/–¥–µ–Ω—å
- –î–Ω–µ–≤–Ω–æ–π fee_in: 50 000 √ó 0.005 (0.5%) = 250 TON ‚âà $50/–¥–µ–Ω—å
- –ú–µ—Å—è—á–Ω—ã–π fee_in: ~$1500
- fee_out (–≤ —Å—Ä–µ–¥–Ω–µ–º): +$300-500/–º–µ—Å—è—Ü
- **–î–æ—Ö–æ–¥: ~$1800-2000/–º–µ—Å—è—Ü**

---

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏)

```sql
-- Users table (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞)
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  telegram_id BIGINT UNIQUE,
  username VARCHAR(255),
  created_at TIMESTAMP DEFAULT NOW()
);

-- Wallets table (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞)
CREATE TABLE wallets (
  user_id INTEGER PRIMARY KEY REFERENCES users(id),
  ton_address VARCHAR(255) UNIQUE NOT NULL,
  balance_pending BIGINT DEFAULT 0, -- –≤ nanotons
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Events table
CREATE TABLE events (
  id SERIAL PRIMARY KEY,
  creator_id INTEGER REFERENCES users(id),
  title VARCHAR(255) NOT NULL,
  description TEXT,
  category VARCHAR(50),
  end_date TIMESTAMP NOT NULL,
  status VARCHAR(20) DEFAULT 'open', -- open, closed, resolved, cancelled
  contract_address VARCHAR(255) UNIQUE, -- –∞–¥—Ä–µ—Å escrow-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –¥–ª—è —ç—Ç–æ–≥–æ —Ä—ã–Ω–∫–∞
  contract_deployed_at TIMESTAMP, -- –∫–æ–≥–¥–∞ –±—ã–ª –∑–∞–¥–µ–ø–ª–æ–µ–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç
  total_yes BIGINT DEFAULT 0, -- –≤ nanotons
  total_no BIGINT DEFAULT 0, -- –≤ nanotons
  resolved_outcome VARCHAR(10), -- yes, no
  resolved_at TIMESTAMP,
  cancellation_requested BOOLEAN DEFAULT FALSE,
  cancellation_reason TEXT,
  cancelled_at TIMESTAMP,
  refund_fee_bps INTEGER DEFAULT 50, -- 0.5% –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞
  max_bet_percent INTEGER DEFAULT 20, -- 20% –æ—Ç –ø—É–ª–∞
  max_probability_change INTEGER DEFAULT 10, -- 10% –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
  created_at TIMESTAMP DEFAULT NOW()
);

-- Bets table
CREATE TABLE bets (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  event_id INTEGER REFERENCES events(id),
  side VARCHAR(10) NOT NULL, -- yes, no
  amount_gross BIGINT NOT NULL, -- –≤ nanotons (—Å fee_in)
  amount_net BIGINT NOT NULL, -- –≤ nanotons (–±–µ–∑ fee_in)
  fee_in BIGINT NOT NULL, -- –≤ nanotons
  tx_hash VARCHAR(255) UNIQUE,
  status VARCHAR(20) DEFAULT 'pending', -- pending, confirmed, failed, refunded
  price DECIMAL(10, 8), -- –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–∞ –º–æ–º–µ–Ω—Ç —Å—Ç–∞–≤–∫–∏
  created_at TIMESTAMP DEFAULT NOW()
);

-- Payouts table
CREATE TABLE payouts (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  event_id INTEGER REFERENCES events(id),
  bet_id INTEGER REFERENCES bets(id),
  amount BIGINT NOT NULL, -- –≤ nanotons
  status VARCHAR(20) DEFAULT 'pending', -- pending, paid, failed
  tx_hash VARCHAR(255),
  created_at TIMESTAMP DEFAULT NOW(),
  paid_at TIMESTAMP
);

-- Cancellation requests
CREATE TABLE cancellation_requests (
  id SERIAL PRIMARY KEY,
  event_id INTEGER REFERENCES events(id),
  user_id INTEGER REFERENCES users(id),
  reason TEXT,
  status VARCHAR(20) DEFAULT 'pending', -- pending, approved, rejected
  created_at TIMESTAMP DEFAULT NOW()
);

-- Pool history (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞)
CREATE TABLE pool_history (
  id SERIAL PRIMARY KEY,
  event_id INTEGER REFERENCES events(id),
  total_yes BIGINT NOT NULL,
  total_no BIGINT NOT NULL,
  timestamp TIMESTAMP DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω—ã)
CREATE INDEX idx_events_status ON events(status);
CREATE INDEX idx_events_end_date ON events(end_date);
CREATE INDEX idx_events_contract_address ON events(contract_address);
CREATE INDEX idx_bets_user_id ON bets(user_id);
CREATE INDEX idx_bets_event_id ON bets(event_id);
CREATE INDEX idx_bets_tx_hash ON bets(tx_hash);
CREATE INDEX idx_bets_status ON bets(status);
CREATE INDEX idx_payouts_user_id ON payouts(user_id);
CREATE INDEX idx_payouts_event_id ON payouts(event_id);
CREATE INDEX idx_payouts_status ON payouts(status);
CREATE INDEX idx_pool_history_event_id ON pool_history(event_id);
```

---

## Smart Contract

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (–æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–∞ —Ä—ã–Ω–æ–∫)

**MarketEscrow.fc** - –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –û–î–ù–û–ì–û —Ä—ã–Ω–∫–∞:

```
storage:
  admin_address: Address
  total_yes: Coins (nanotons)
  total_no: Coins (nanotons)
  resolved_outcome: Int (0 = open, 1 = yes wins, 2 = no wins)
  fee_in_bps: Int (–Ω–∞–ø—Ä–∏–º–µ—Ä, 50 = 0.5%)
  fee_out_bps: Int (–Ω–∞–ø—Ä–∏–º–µ—Ä, 150 = 1.5%)
  user_positions: map[Address] ‚Üí (amount_yes: Coins, amount_no: Coins)
```

### –§—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

#### 1. place_bet(side, amount)

–ü—Ä–∏–Ω–∏–º–∞–µ—Ç TON, –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—É–ª—ã, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç fee_in –Ω–∞ –∞–¥–º–∏–Ω-–∫–æ—à–µ–ª–µ–∫.

**–õ–æ–≥–∏–∫–∞**:
```typescript
() place_bet(side, amount) {
  // –í–∞–ª–∏–¥–∞—Ü–∏—è (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞)
  if (amount < 100000000) throw("Min bet: 0.1 TON"); // 0.1 TON –≤ nanotons
  if (amount > 100000000000) throw("Max bet: 100 TON");
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –Ω–∞ —Ä–∞–∑–º–µ—Ä —Å—Ç–∞–≤–∫–∏ (20% –æ—Ç –ø—É–ª–∞)
  int current_pool = (side == 1) ? total_yes : total_no;
  int max_bet = current_pool * 20 / 100;
  if (amount > max_bet && current_pool > 0) throw("Bet too large");
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ä—ã–Ω–æ–∫ –æ—Ç–∫—Ä—ã—Ç
  if (resolved_outcome != 0) throw("Market already resolved");
  
  // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–º–∏—Å—Å–∏—é fee_in
  int fee_amount = amount * fee_in_bps / 10000;
  int amount_net = amount - fee_amount;
  
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∏—Å—Å–∏—é –Ω–∞ –∞–¥–º–∏–Ω-–∫–æ—à–µ–ª–µ–∫ (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–æ)
  send_message(admin_address, fee_amount);
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –ø—É–ª—ã
  if (side == 1) {
    total_yes += amount_net;
  } else {
    total_no += amount_net;
  }
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  var (user_yes, user_no) = user_positions[msg.sender];
  if (side == 1) {
    user_positions[msg.sender] = (user_yes + amount_net, user_no);
  } else {
    user_positions[msg.sender] = (user_yes, user_no + amount_net);
  }
}
```

#### 2. resolve_market(outcome, fee_out_bps)

–ê–¥–º–∏–Ω —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ä—ã–Ω–æ–∫, –≤—ã—á–∏—Å–ª—è–µ—Ç fee_out, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –∞–¥–º–∏–Ω-–∫–æ—à–µ–ª–µ–∫.

**–õ–æ–≥–∏–∫–∞**:
```typescript
() resolve_market(outcome, fee_out_bps) {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∞ (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞)
  if (msg.sender != admin_address) {
    throw("Only admin can resolve");
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ä—ã–Ω–æ–∫ –µ—â–µ –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞)
  if (resolved_outcome != 0) {
    throw("Market already resolved");
  }
  
  // Edge case: –ø—É—Å—Ç—ã–µ –ø—É–ª—ã (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞)
  if (total_yes == 0 || total_no == 0) {
    // –û—Å–æ–±—ã–π —Å–ª—É—á–∞–π: –≤–æ–∑–≤—Ä–∞—Ç –≤—Å–µ—Ö —Å—Ç–∞–≤–æ–∫ –º–∏–Ω—É—Å –∫–æ–º–∏—Å—Å–∏—è
    // –ò–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–±–µ–¥–∞ –æ–¥–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã
    resolved_outcome = outcome;
    return;
  }
  
  // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–º–∏—Å—Å–∏—é fee_out —Å –ø—É–ª–∞ –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏—Ö
  int fee_amount = 0;
  if (outcome == 1) {
    // YES –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç, –∫–æ–º–∏—Å—Å–∏—è —Å NO –ø—É–ª–∞
    fee_amount = total_no * fee_out_bps / 10000;
  } else {
    // NO –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç, –∫–æ–º–∏—Å—Å–∏—è —Å YES –ø—É–ª–∞
    fee_amount = total_yes * fee_out_bps / 10000;
  }
  
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∏—Å—Å–∏—é –Ω–∞ –∞–¥–º–∏–Ω-–∫–æ—à–µ–ª–µ–∫ (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–æ)
  send_message(admin_address, fee_amount);
  
  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
  resolved_outcome = outcome;
}
```

#### 3. claim_payout()

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–∏—Ä–∞–µ—Ç –≤—ã–∏–≥—Ä—ã—à. –ö–æ–Ω—Ç—Ä–∞–∫—Ç —Å–∞–º –≤—ã—á–∏—Å–ª—è–µ—Ç –≤—ã–ø–ª–∞—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤–µ user_positions.

**–õ–æ–≥–∏–∫–∞**:
```typescript
() claim_payout() {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä—ã–Ω–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω
  if (resolved_outcome == 0) throw("Market not resolved");
  
  // –ü–æ–ª—É—á–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  var (amount_yes, amount_no) = user_positions[msg.sender];
  
  // –í—ã—á–∏—Å–ª—è–µ–º –≤—ã–ø–ª–∞—Ç—É
  int payout = 0;
  
  if (resolved_outcome == 1 && amount_yes > 0) {
    // YES –≤—ã–∏–≥—Ä–∞–ª
    // Edge case: –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞)
    if (total_yes == 0) {
      throw("Invalid state: total_yes is zero");
    }
    
    int fee_out = total_no * fee_out_bps / 10000;
    int total_pool = total_yes + total_no - fee_out;
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è (–ò–°–ü–†–ê–í–õ–ï–ù–û: —É–º–Ω–æ–∂–∞–µ–º —Å–Ω–∞—á–∞–ª–∞, –ø–æ—Ç–æ–º –¥–µ–ª–∏–º)
    payout = (amount_yes * total_pool) / total_yes;
    
  } else if (resolved_outcome == 2 && amount_no > 0) {
    // NO –≤—ã–∏–≥—Ä–∞–ª
    // Edge case: –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å (–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞)
    if (total_no == 0) {
      throw("Invalid state: total_no is zero");
    }
    
    int fee_out = total_yes * fee_out_bps / 10000;
    int total_pool = total_yes + total_no - fee_out;
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è (–ò–°–ü–†–ê–í–õ–ï–ù–û: —É–º–Ω–æ–∂–∞–µ–º —Å–Ω–∞—á–∞–ª–∞, –ø–æ—Ç–æ–º –¥–µ–ª–∏–º)
    payout = (amount_no * total_pool) / total_no;
  }
  
  if (payout > 0) {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—ã–ø–ª–∞—Ç—É
    send_message(msg.sender, payout);
    // –û–±–Ω—É–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é
    user_positions[msg.sender] = (0, 0);
  }
}
```

#### 4. refund_market(refund_fee_bps)

–í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ —Å–æ–±—ã—Ç–∏—è. **–ò–°–ü–†–ê–í–õ–ï–ù–û**: —É–±—Ä–∞–Ω `market_id`, –∫–æ–Ω—Ç—Ä–∞–∫—Ç = —Ä—ã–Ω–æ–∫.

**–õ–æ–≥–∏–∫–∞**:
```typescript
() refund_market(refund_fee_bps) {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∞
  if (msg.sender != admin_address) {
    throw("Only admin can refund");
  }
  
  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–≤–∫–∏ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –º–∏–Ω—É—Å –∫–æ–º–∏—Å—Å–∏—è
  // refund_amount = user_stake √ó (10000 - refund_fee_bps) / 10000
  
  // –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞
  // (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π TON –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

**–ò–°–ü–†–ê–í–õ–ï–ù–û**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞.

```typescript
// fee_in —É—Ö–æ–¥–∏—Ç —Å—Ä–∞–∑—É, fee_out —É—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏
// –ù–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: total_yes + total_no (–µ—Å–ª–∏ –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)
// –ò–ª–∏: –æ—Å—Ç–∞—Ç–æ–∫ –ø–æ—Å–ª–µ –≤—ã–ø–ª–∞—Ç (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)

int contract_balance = my_balance();
if (resolved_outcome == 0) {
  // –†—ã–Ω–æ–∫ –æ—Ç–∫—Ä—ã—Ç - –±–∞–ª–∞–Ω—Å = total_yes + total_no
  if (contract_balance != total_yes + total_no) {
    throw("Balance mismatch - audit required");
  }
} else {
  // –†—ã–Ω–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω - –±–∞–ª–∞–Ω—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å >= 0
  // (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ –ø–æ—Å–ª–µ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç)
}
```

---

## API Endpoints

### –°–æ–±—ã—Ç–∏—è

```
GET /api/events
Query: ?page=1&limit=20&status=open&sort=volume
Response: { events: [...], total: 100, page: 1 }

GET /api/events/:id
Response: { 
  event: {...},
  probability: { yes: 0.65, no: 0.35 },
  coefficients: { yes: 1.54, no: 2.86 },
  poolHistory: [...] // –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
}

POST /api/events
Body: { title, description, category, end_date }
Headers: { Authorization: "TON transaction with 0.01 TON deposit" }
Response: { 
  event: {...},
  contract_address: "EQD...",
  deployment_tx: "..."
}
```

### –°—Ç–∞–≤–∫–∏

```
POST /api/bets
Body: { eventId, side: "yes"|"no", amount, txHash }
Response: { 
  success: true, 
  bet: {...},
  validation: {
    maxBetAllowed: 200,
    probabilityChange: 0.05
  }
}

GET /api/user/:id/bets
Query: ?eventId=1&status=confirmed
Response: { bets: [...] }
```

### –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

```
POST /api/events/:id/resolve (admin only)
Body: { outcome: "yes" | "no", admin_signature: "..." }
Response: { success: true, tx_hash: "..." }
```

### –û—Ç–º–µ–Ω–∞ —Å–æ–±—ã—Ç–∏–π

```
POST /api/events/:id/cancel-request
Body: { reason: "Event is invalid" }
Response: { success: true, request_id: 123 }

POST /api/events/:id/cancel (admin only)
Body: { approved: true }
Response: { success: true, refund_initiated: true }

POST /api/events/:id/refund (admin only)
Response: { success: true, tx_hash: "..." }
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

```
GET /api/user/:id/balance
Response: { balance: "100.5", pending: "10.2" }

GET /api/leaderboard
Query: ?period=week|month
Response: [
  { rank: 1, username: "User1", pnl: 150, pnlPercent: 15 },
  ...
]
```

---

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)

#### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–∞–∑–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ —Å—Ö–µ–º–µ –ë–î
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ –±—ã–ª–æ —Ç–∞–±–ª–∏—Ü `users` –∏ `wallets`.  
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Å—Ö–µ–º—É –ë–î (—Å–º. —Ä–∞–∑–¥–µ–ª "–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö").

#### 2. –û—à–∏–±–∫–∞ –≤ –ø—Ä–æ–≤–µ—Ä–∫–µ –±–∞–ª–∞–Ω—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ `total_fees_paid`.  
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ (—Å–º. —Ä–∞–∑–¥–µ–ª "Smart Contract").

#### 3. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ market_id –≤ refund_event
**–ü—Ä–æ–±–ª–µ–º–∞**: –§—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ `market_id`, –Ω–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç = —Ä—ã–Ω–æ–∫.  
**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –≤ `refund_market()` –±–µ–∑ `market_id`.

#### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ backend —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º
**–ü—Ä–æ–±–ª–µ–º–∞**: Backend –Ω–µ –∑–Ω–∞–ª –æ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ç–∞–≤–∫–∞—Ö –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ.  
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

```typescript
// Backend –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
async function syncContractState(contractAddress: string) {
  const contract = await tonClient.getContract(contractAddress);
  const state = await contract.getState();
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –ë–î —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
  await db.events.update({
    contract_address: contractAddress
  }, {
    total_yes: state.total_yes,
    total_no: state.total_no,
    resolved_outcome: state.resolved_outcome
  });
  
  // –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø—É–ª–æ–≤
  await db.pool_history.create({
    event_id: event.id,
    total_yes: state.total_yes,
    total_no: state.total_no
  });
}

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
async function monitorContractTransactions(contractAddress: string) {
  // –°–ª—É—à–∞–µ–º –Ω–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç
  // –û–±–Ω–æ–≤–ª—è–µ–º –ë–î –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å—Ç–∞–≤–∫–µ
  tonClient.subscribeToTransactions(contractAddress, async (tx) => {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    await processBetTransaction(tx);
  });
}
```

#### 5. –ü—Ä–æ–±–ª–µ–º–∞ —Å fee_in –∏ fee_out: –∫—É–¥–∞ —É—Ö–æ–¥—è—Ç –∫–æ–º–∏—Å—Å–∏–∏?
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ –±—ã–ª–æ –æ–ø–∏—Å–∞–Ω–æ, –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–æ–º–∏—Å—Å–∏–∏.  
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –∞–¥–º–∏–Ω-–∫–æ—à–µ–ª–µ–∫ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö `place_bet` –∏ `resolve_market` (—Å–º. —Ä–∞–∑–¥–µ–ª "Smart Contract").

#### 6. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∞ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ
**–ü—Ä–æ–±–ª–µ–º–∞**: –õ—é–±–æ–π –º–æ–≥ —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Ä—ã–Ω–æ–∫.  
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `msg.sender != admin_address` –≤ `resolve_market` –∏ `refund_market`.

#### 7. Edge cases: –ø—É—Å—Ç—ã–µ –ø—É–ª—ã, –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ `total_yes = 0` –∏–ª–∏ `total_no = 0`.  
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–æ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

### üü° –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å)

#### 8. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –ø—É–ª–æ–≤
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `pool_history` (—Å–º. —Å—Ö–µ–º—É –ë–î).

#### 9. –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞–≤–æ–∫ —Ç–æ–ª—å–∫–æ –≤ backend
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é, –æ—Ç–ø—Ä–∞–≤–∏–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –Ω–∞–ø—Ä—è–º—É—é –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç.  
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç (—Å–º. —Ñ—É–Ω–∫—Ü–∏—é `place_bet`).

#### 10. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ backend
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫–∏ —á–µ—Ä–µ–∑ API.  
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:

```typescript
POST /api/bets
Body: { eventId, side, amount, txHash }

// Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
async function verifyBet(txHash: string, eventId: number, expectedAmount: bigint) {
  const tx = await tonClient.getTransaction(txHash);
  
  if (!tx) throw new Error("Transaction not found");
  if (tx.to !== event.contract_address) throw new Error("Wrong contract");
  if (tx.value !== expectedAmount) throw new Error("Amount mismatch");
  if (tx.success === false) throw new Error("Transaction failed");
  
  return true;
}
```

#### 11. –ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º –ø—Ä–∏ –¥–µ–ª–µ–Ω–∏–∏ nanotons
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –¥–µ–ª–µ–Ω–∏–∏ —Ç–µ—Ä—è—é—Ç—Å—è –¥—Ä–æ–±–Ω—ã–µ —á–∞—Å—Ç–∏.  
**–†–µ—à–µ–Ω–∏–µ**: –£–º–Ω–æ–∂–∞–µ–º —Å–Ω–∞—á–∞–ª–∞, –ø–æ—Ç–æ–º –¥–µ–ª–∏–º: `payout = (user_stake * total_pool) / total_yes`.

#### 12. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ failed —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å `failed` –≤ —Ç–∞–±–ª–∏—Ü—É `bets` –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

#### 13. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω middleware:

```typescript
import rateLimit from 'express-rate-limit';

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 –º–∏–Ω—É—Ç
  max: 100 // –º–∞–∫—Å–∏–º—É–º 100 –∑–∞–ø—Ä–æ—Å–æ–≤
});

app.use('/api/', limiter);

// –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π –ª–∏–º–∏—Ç –¥–ª—è —Å—Ç–∞–≤–æ–∫
const betLimiter = rateLimit({
  windowMs: 60 * 1000, // 1 –º–∏–Ω—É—Ç–∞
  max: 10 // –º–∞–∫—Å–∏–º—É–º 10 —Å—Ç–∞–≤–æ–∫ –≤ –º–∏–Ω—É—Ç—É
});

app.use('/api/bets', betLimiter);
```

### üü¢ –ú–µ–ª–∫–∏–µ –Ω–µ–¥–æ—á—ë—Ç—ã

- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `node-pg-migrate`)
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ (unit, integration, E2E)
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API (Swagger/OpenAPI)
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Winston, Prometheus)
- –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–∏–ø–∞–º–∏: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `number` –≤–º–µ—Å—Ç–æ `bigint` –¥–ª—è TON

---

## –§–æ—Ä–º—É–ª—ã –∏ —Ä–∞—Å—á–µ—Ç—ã

### –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å YES –≤ —Ä–µ–∞–ª—Ç–∞–π–º–µ

```
prob_yes = total_yes / (total_yes + total_no)
prob_no = 1 - prob_yes
```

**Edge case**: –ï—Å–ª–∏ `total_yes + total_no = 0`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º `{ yes: 0.5, no: 0.5 }`.

### –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–∏ —Å—Ç–∞–≤–∫–µ

```
coef_yes = (total_yes + total_no) / total_yes  (–µ—Å–ª–∏ total_yes > 0)
coef_no = (total_yes + total_no) / total_no    (–µ—Å–ª–∏ total_no > 0)
```

### Fee –Ω–∞ –≤—Ö–æ–¥–µ

```
fee_amount = bet_gross √ó fee_in_bps / 10000
amount_net = bet_gross - fee_amount
```

### Fee –Ω–∞ –≤—ã—Ö–æ–¥–µ

```
fee_out_amount = min(total_yes, total_no) √ó fee_out_bps / 10000
```

### –í—ã–ø–ª–∞—Ç–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—é

–°–º. —Ä–∞–∑–¥–µ–ª "–ö–æ–º–∏—Å—Å–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å".

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –æ—Ç –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π –∫—Ä—É–ø–Ω—ã–º–∏ —Å—Ç–∞–≤–∫–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–∏—Ç –º–æ–∂–µ—Ç –∏—Å–∫–∞–∑–∏—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∫—Ä—É–ø–Ω–æ–π —Å—Ç–∞–≤–∫–æ–π.

**–†–µ—à–µ–Ω–∏–µ**: –õ–∏–º–∏—Ç—ã –Ω–∞ —Å—Ç–∞–≤–∫–∏:
- –ú–∞–∫—Å–∏–º—É–º 20% –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø—É–ª–∞
- –ú–∞–∫—Å–∏–º—É–º 10% –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∑–∞ –æ–¥–Ω—É —Å—Ç–∞–≤–∫—É
- –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –º–∞–∫—Å–∏–º—É–º: 100 TON

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```typescript
function validateBetSize(event: Event, betAmount: number, side: 'yes' | 'no') {
  const currentPool = side === 'yes' ? event.totalYes : event.totalNo;
  const maxBet = currentPool * 0.20; // 20% –æ—Ç –ø—É–ª–∞
  
  if (betAmount > maxBet && currentPool > 0) {
    throw new Error(`Bet too large. Maximum: ${maxBet} TON (20% of pool)`);
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
  const total = event.totalYes + event.totalNo;
  if (total === 0) return; // –ü–µ—Ä–≤–∞—è —Å—Ç–∞–≤–∫–∞
  
  const currentProb = event.totalYes / total;
  const newTotalYes = side === 'yes' ? event.totalYes + betAmount : event.totalYes;
  const newTotalNo = side === 'no' ? event.totalNo + betAmount : event.totalNo;
  const newProb = newTotalYes / (newTotalYes + newTotalNo);
  const probChange = Math.abs(newProb - currentProb);
  
  if (probChange > 0.10) { // 10%
    throw new Error(`Bet would change probability by ${probChange * 100}%. Maximum: 10%`);
  }
}
```

### –î—Ä—É–≥–∏–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `msg.sender` –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç —Ä–∞–∑—Ä–µ—à–∞—Ç—å)
- ‚úÖ –î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –ø–µ—Ä–µ–¥ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º
- ‚úÖ –ú–∏–Ω–∏–º—É–º/–º–∞–∫—Å–∏–º—É–º —Å—Ç–∞–≤–∫–∏ (0.1 TON / 100 TON)
- ‚úÖ Rate limiting –Ω–∞ API endpoints
- ‚úÖ –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
- ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –≤ –ë–î

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### MVP (–ø–µ—Ä–≤—ã–µ 2 –Ω–µ–¥–µ–ª–∏)

1. ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (frontend, backend, smart-contract)
2. ‚úÖ Smart Contract: MarketEscrow (–æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–∞ —Ä—ã–Ω–æ–∫)
3. ‚úÖ Backend: –¥–µ–ø–ª–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è
4. ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ —á–µ—Ä–µ–∑ TonConnect
5. ‚úÖ –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π —Å –∞–¥—Ä–µ—Å–∞–º–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
6. ‚úÖ –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫: –æ—Ç–ø—Ä–∞–≤–∫–∞ TON –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å–æ–±—ã—Ç–∏—è
7. ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∞–¥–º–∏–Ω–æ–º
8. ‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã–ø–ª–∞—Ç —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç (claim_payout)

### –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø (2-4 –Ω–µ–¥–µ–ª–∏)

9. –û—Ç–º–µ–Ω–∞ —Å–æ–±—ã—Ç–∏–π –∏ –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤
10. –ó–∞—â–∏—Ç–∞ –æ—Ç –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π (–ª–∏–º–∏—Ç—ã –Ω–∞ —Å—Ç–∞–≤–∫–∏)
11. Telegram –±–æ—Ç —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
12. –õ–∏–¥–µ—Ä–±–æ—Ä–¥
13. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è backend —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º
14. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
15. Rate limiting

### –ë—É–¥—É—â–µ–µ

16. DAO —Å —Å—É–¥—å—è–º–∏
17. TWAP –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫
18. Factory-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –±–∞—Ç—á-–¥–µ–ø–ª–æ—è
19. –¢–µ—Å—Ç—ã (unit, integration, E2E)
20. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
21. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger)

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è: –∑–∞–ª–æ–≥ 0.01 TON

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ª–æ–≥ 0.01 TON –æ—Ç —Å–æ–∑–¥–∞—Ç–µ–ª—è:
- –ó–∞–ª–æ–≥ –∏–¥–µ—Ç –Ω–∞ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–µ–ø–ª–æ—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (~0.1-0.2 TON)
- –ï—Å–ª–∏ –¥–µ–ø–ª–æ–π —Å—Ç–æ–∏—Ç –º–µ–Ω—å—à–µ, –æ—Å—Ç–∞—Ç–æ–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
- –ï—Å–ª–∏ —Å–æ–∑–¥–∞—Ç–µ–ª—å –Ω–µ –∑–∞–ø–ª–∞—Ç–∏–ª, —Å–æ–±—ã—Ç–∏–µ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

### –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø–æ—Å–ª–µ end_date

- –ü–æ–ª–µ `end_date` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ (–¥–ª—è UI)
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç –∞–¥–º–∏–Ω –≤—Ä—É—á–Ω—É—é (–ø–æ–∑–∂–µ ‚Äî DAO)
- –°–æ–±—ã—Ç–∏–µ –º–æ–∂–µ—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è `open` –ø–æ—Å–ª–µ `end_date` –¥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–û–∂–∏–¥–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è" –µ—Å–ª–∏ `end_date` –ø—Ä–æ—à–µ–ª, –Ω–æ `status` = `open`

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

–° –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π "–æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–∞ —Ä—ã–Ω–æ–∫" –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ö–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ = –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
- –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤
- Backend —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–µ—Å—Ç—Ä–æ–º: `event_id ‚Üí contract_address`

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞ PredictionBot —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–π. –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –≤–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–º–µ—é—Ç —Ä–µ—à–µ–Ω–∏—è, –º–µ–ª–∫–∏–µ –Ω–µ–¥–æ—á—ë—Ç—ã –æ—Ç–º–µ—á–µ–Ω—ã –¥–ª—è –±—É–¥—É—â–µ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏.

**–ì–æ—Ç–æ–≤–æ –∫ –Ω–∞—á–∞–ª—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!** üöÄ

